Лабораторная работа №3
Цель и постановка задания
Получение навыков асинхронного взаимодействия микросервисов.
Задание 1
Добавить в docker-compose файл новый сервис для Kafka.
Задание 2
Обновить configuration server, добавив в него новые настройки для kafka.
Задание 3
Добавить таблицу (user_id, имя топика, дата и время, payload) для
исходящих/входящих сообщений в микросервисе компаний и пользователей.
Задание 4
Создать ендпоинт для удаления компании (компания помечается
удаленной и перестает искаться в ендпоинте для поиска компаний, физически
из БД компания на данном этапе не удаляется). Если компании по id не
существует – кидаем 404 ошибку. При удалении компании должно
отправляться сообщение в user сервис через Kafka (id и payload сообщения
сохраняются в таблицу). При получении сообщения в юзер сервисе, оно
сохраняется в соотвествующую таблицу БД (см задание 2). Далее ищутся все
пользователи, работающие в данной компании, и поле company_id для них
сбрасывается в null.
Задание 5
После того как все пользователи в юзер сервисе отвязаны от компаний,
должно отправиться сообщение в company сервис, при получении которого в
company сервисе компания будет удалена из БД.
Задание 6
Добавить в Postman в коллекцию для company сервиса новый реквест для
удаления компании.