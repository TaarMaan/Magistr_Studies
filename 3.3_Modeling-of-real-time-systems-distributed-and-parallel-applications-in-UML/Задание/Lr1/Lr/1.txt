Лабораторная работа №1
Цель и постановка задания
Получение навыков работы с сервером авторизации Keycloak.
Установить Docker. Создать docker-compose.yaml файл, в котором
описать необходимые для работы сервисы (keycloak, postgresql. Обратите
внимание, для keycloak необходимо указать логин и пароль для входа в
KEYCLOAK_USER: root
KEYCLOAK_PASSWORD: root
Также не забудьте пробросить порты наружу из контейнера, для доступа
к приложениям с локальной машины.
Необходимо настроить Keycloak. Создать свой realm и client. Создать
пользователей, под которыми будем авторизовываться в приложении.
Необходимо создать, как минимум, две роли – администратор и простой
Создать Spring Cloud Config Server, в котором описать настройки для
подключения к серверу авторизации
Спроектировать базу данных, для хранения информации о пользователях.
В ней должна дублироваться вся информация из keycloak сервера о
пользователях, включая keycloak id.
Создать Spring приложение для работы с пользователями в Keycloak.
Администратору должны быть доступны рест ендпоинты для
- обновление информации о юзере,
- добавление юзеру роли,
- удаление у юзера роли,
- удаление юзера (физически из БД юзера не удаляем),
- получить информацию о всех пользователях по фильтру,
- получить информацию о пользователе по его id,
- получить полную информацию о себе (текущем пользователе).
Обычному пользователю:
- получить полную информацию о себе (текущем пользователе).
Данное приложение должно проверять по JWT токену авторизован ли
пользователь, и если нет – кидать 400 ошибку.